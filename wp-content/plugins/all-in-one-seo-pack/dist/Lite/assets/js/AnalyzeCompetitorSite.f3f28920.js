var f=Object.defineProperty,g=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var m=(t,s,e)=>s in t?f(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,o=(t,s)=>{for(var e in s||(s={}))C.call(s,e)&&m(t,e,s[e]);if(u)for(var e of u(s))S.call(s,e)&&m(t,e,s[e]);return t},n=(t,s)=>g(t,v(s));import{d as y,j as a,e as z,f as A}from"./index.0f8634bc.js";import"./ToolsSettings.4a14c135.js";import{S as l}from"./SeoSiteScore.8753b911.js";import{n as c}from"./vueComponentNormalizer.87056a83.js";import{k as R}from"./index.02c35f2a.js";import{C as k,a as $}from"./Score.0ebb8955.js";import{p as T}from"./popup.25df8419.js";import{C as b}from"./Blur.8490ecd2.js";import{C as _}from"./Card.5e3c0ad5.js";import{C as E}from"./SeoSiteAnalysisResults.424ab2a8.js";import{C as x}from"./Index.8ed62ab8.js";import{S as U}from"./Refresh.c697ed05.js";import{S as O}from"./Trash.214b5744.js";import"./client.93f15631.js";import"./params.bea1a08d.js";import"./Tooltip.674a9fb4.js";import"./QuestionMark.83ebd18e.js";import"./Slide.f5d21606.js";import"./GoogleSearchPreview.308b89da.js";import"./Close.5e7bcb70.js";import"./Information.f4b75b56.js";import"./Gear.c974e953.js";var I=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("core-card",{attrs:{slug:"analyzeNewCompetitor","hide-header":"","no-slide":"",toggles:!1}},[e(t.internalOptions.internal.siteAnalysis.connectToken?"div":"core-blur",{tag:"component"},[t._t("default")],2),t.internalOptions.internal.siteAnalysis.connectToken?t._e():e("div",{staticClass:"aioseo-seo-site-score-cta"},[e("a",{attrs:{href:"#"},on:{click:function(r){return t.openPopup(t.$aioseo.urls.connect)}}},[t._v(t._s(t.connectWithAioseo))]),t._v(" "+t._s(t.strings.toAnalyzeCompetitorSite)+" ")])],1),t.internalOptions.internal.siteAnalysis.connectToken?[t._t("competitor-results")]:t._e()],2)},w=[];const L={components:{CoreBlur:b,CoreCard:_},mixins:[l],computed:o({},y(["internalOptions"])),methods:n(o({},a(["saveConnectToken"])),{openPopup(t){T(t,this.connectWithAioseo,600,630,!0,["token"],this.completedCallback,()=>{})},completedCallback(t){return this.saveConnectToken(t.token)}})},p={};var j=c(L,I,w,!1,M,null,null,null);function M(t){for(let s in p)this[s]=p[s]}var P=function(){return j.exports}(),F=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"aioseo-site-score-competitor"},[e("div",{staticClass:"aioseo-seo-site-score-score"},[e("core-site-score",{attrs:{loading:t.isAnalyzing||t.loading,score:t.score,description:t.description}})],1),e("div",{staticClass:"aioseo-seo-site-score-recommendations"},[e("div",{staticClass:"critical"},[e("span",{staticClass:"round red"},[t._v(t._s(t.summary.critical||0))]),t._v(" "+t._s(t.strings.criticalIssues)+" ")]),e("div",{staticClass:"recommended"},[e("span",{staticClass:"round blue"},[t._v(t._s(t.summary.recommended||0))]),t._v(" "+t._s(t.strings.recommendedImprovements)+" ")]),e("div",{staticClass:"good"},[e("span",{staticClass:"round green"},[t._v(t._s(t.summary.good||0))]),t._v(" "+t._s(t.strings.goodResults)+" ")])]),e("base-button",{staticClass:"refresh-results",attrs:{type:"gray",size:"small",loading:t.isAnalyzing},on:{click:t.refresh}},[e("svg-refresh"),t._v(" "+t._s(t.strings.refreshResults)+" ")],1),t.mobileSnapshot?e("div",{staticClass:"mobile-snapshot"},[e("div",[t._v(t._s(t.strings.mobileSnapshot))]),e("img",{attrs:{src:t.mobileSnapshot}})]):t._e()],1)},D=[];const W={components:{CoreSiteScore:x,SvgRefresh:U},mixins:[l],props:{score:Number,loading:Boolean,site:{type:String,required:!0},summary:{type:Object,default(){return{}}},mobileSnapshot:String},data(){return{isAnalyzing:!1,strings:{criticalIssues:"Important Issues",warnings:"Warnings",recommendedImprovements:"Recommended Improvements",goodResults:"Good Results",completeSiteAuditChecklist:"Complete Site Audit Checklist",refreshResults:"Refresh Results",mobileSnapshot:"Mobile Snapshot"}}},methods:n(o({},a(["runSiteAnalyzer","deleteCompetitorSite"])),{refresh(){this.isAnalyzing=!0,this.runSiteAnalyzer({url:this.site,refresh:!0}).then(()=>this.isAnalyzing=!1)}})},h={};var G=c(W,F,D,!1,N,null,null,null);function N(t){for(let s in h)this[s]=h[s]}var B=function(){return G.exports}(),H=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"aioseo-analyze-competitor-site"},[e("core-analyze-competitor-site-header",{scopedSlots:t._u([{key:"competitor-results",fn:function(){return t._l(t.competitorResults,function(r,i){return e("core-card",{key:i,attrs:{id:"aioseo-competitor-results"+t.hashCode(i),slug:"analyzeCompetitorSite"+i,"save-toggle-status":!1},scopedSlots:t._u([{key:"header",fn:function(){return[e("core-analyze-score",{attrs:{score:t.parseResults(r).score}}),t._v(" "+t._s(i)+" "),e("svg-trash",{nativeOn:{click:function(K){return t.startDeleteSite(i)}}})]},proxy:!0}],null,!0)},[e("div",{staticClass:"competitor-results-main"},[e("core-site-score-competitor",{attrs:{site:i,score:t.parseResults(r).score,loading:t.analyzing,summary:t.getSummary(t.parseResults(r).results),"mobile-snapshot":t.parseResults(r).results.advanced.mobileSnapshot}}),e("div",{staticClass:"competitor-results-body"},[e("core-seo-site-analysis-results",{attrs:{section:"all-items","all-results":t.parseResults(r).results,"show-google-preview":""}})],1)],1)])})},proxy:!0}])},[e("core-analyze",{attrs:{header:t.strings.enterCompetitorUrl,description:t.strings.performInDepthAnalysis,inputError:t.inputError,isAnalyzing:t.isAnalyzing,analyzeTime:t.analyzeTime,placeholder:"https://competitorwebsite.com"},on:{startAnalyzing:t.startAnalyzing},scopedSlots:t._u([{key:"errors",fn:function(){return[t.inputError?e("div",{staticClass:"aioseo-description aioseo-error"},[t._v(" "+t._s(t.strings.pleaseEnterValidUrl)+" ")]):t._e(),t.analyzer==="competitor-site"&&t.analyzeError?e("div",{staticClass:"analyze-errors aioseo-description aioseo-error",domProps:{innerHTML:t._s(t.analyzeError)}}):t._e()]},proxy:!0}])})],1)],1)},q=[];const V={components:{CoreAnalyze:k,CoreAnalyzeScore:$,CoreAnalyzeCompetitorSiteHeader:P,CoreCard:_,CoreSeoSiteAnalysisResults:E,CoreSiteScoreCompetitor:B,SvgTrash:O},mixins:[l],data(){return{competitorUrl:null,isAnalyzing:!1,inputError:!1,competitorResults:{},analyzeTime:8,strings:{enterCompetitorUrl:"Enter Competitor URL",performInDepthAnalysis:"Perform in-depth SEO Analysis of your competitor's website.",analyze:"Analyze",pleaseEnterValidUrl:"Please enter a valid URL."}}},watch:{analyzeError(t){t&&(this.isAnalyzing=!1)}},computed:n(o(o({},y(["options","analyzer","analyzing","analyzeError"])),z(["getCompetitorSiteAnalysisResults","goodCount","recommendedCount","criticalCount"])),{getError(){switch(this.analyzeError){case"invalid-url":return"The URL provided is invalid.";case"missing-content":return this.$t.sprintf("%1$s %2$s","We were unable to parse the content for this site.",this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"seoAnalyzerIssues",!0));case"invalid-token":return this.$t.sprintf("Your site is not connected. Please connect to %1$s, then try again.","AIOSEO")}return this.analyzeError}}),methods:n(o(o({},a(["runSiteAnalyzer","deleteCompetitorSite","saveConnectToken"])),A(["toggleCard","closeCard"])),{parseResults(t){return JSON.parse(t)},getSummary(t){return{recommended:this.recommendedCount(t),critical:this.criticalCount(t),good:this.goodCount(t)}},startAnalyzing(t){if(this.inputError=!1,this.competitorUrl=t.replace("http://","https://"),this.competitorUrl.startsWith("https://")||(this.competitorUrl="https://"+this.competitorUrl),!R(this.competitorUrl)){this.inputError=!0;return}this.$store.commit("analyzing",!0),this.$store.commit("analyzeError",!1),this.runSiteAnalyzer({url:this.competitorUrl}),this.isAnalyzing=!0,setTimeout(this.checkStatus,this.analyzeTime*1e3),this.closeAllCards()},checkStatus(){if(this.isAnalyzing=!1,this.analyzing){this.$nextTick(()=>{this.isAnalyzing=!0,2>this.analyzeTime&&(this.analyzeTime=8),this.analyzeTime=this.analyzeTime/2,setTimeout(this.checkStatus,this.analyzeTime*1e3)});return}this.competitorUrl=null,this.competitorResults=this.getCompetitorSiteAnalysisResults,this.toggleFirstCard(),this.$nextTick(()=>{const t=Object.keys(this.competitorResults),s=document.querySelector(".aioseo-header"),e=s.offsetHeight+s.offsetTop+30;this.$scrollTo("#aioseo-competitor-results"+this.hashCode(t[0]),{offset:-e})})},startDeleteSite(t){this.closeAllCards(),this.$delete(this.competitorResults,t),this.deleteCompetitorSite(t).then(()=>{this.competitorResults=this.getCompetitorSiteAnalysisResults})},closeAllCards(){Object.keys(this.competitorResults).forEach(s=>{this.closeCard("analyzeCompetitorSite"+s)})},toggleFirstCard(){const t=Object.keys(this.competitorResults);this.toggleCard("analyzeCompetitorSite"+t[0])},hashCode(t){if(!t)return;let s=0,e,r;for(e=0;e<t.length;e++)r=t.charCodeAt(e),s=(s<<5)-s+r,s|=0;return s}}),mounted(){this.$store.commit("analyzeError",!1),this.competitorResults=this.getCompetitorSiteAnalysisResults,this.toggleFirstCard()}},d={};var J=c(V,H,q,!1,Y,null,null,null);function Y(t){for(let s in d)this[s]=d[s]}var Ct=function(){return J.exports}();export{Ct as default};
